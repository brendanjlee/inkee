(this.webpackJsonpsplat=this.webpackJsonpsplat||[]).push([[0],{54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),c=n(41),s=n.n(c),i=(n(54),n(26)),r=n(3),l=(n(55),n(4)),u=n(47),d=(n(56),n.p+"static/media/inkee-logo.b7363c11.png"),j=n(0),m=a.a.createContext(),v=function(e){var t=e.children,n=e.socket,a=void 0===n?null:n,c=Object(o.useRef)(null),s=Object(o.useRef)(null),i=Object(o.useRef)([]),l=Object(o.useRef)([]),u=Object(o.useState)(!1),d=Object(r.a)(u,2),v=d[0],b=d[1],f=Object(o.useState)(!0),g=Object(r.a)(f,2),h=g[0],O=g[1],x=Object(o.useState)({x:0,y:0,color:"black",lineThickness:5}),p=Object(r.a)(x,2),w=p[0],y=p[1],C=function(){if(!a){var e=c.current,t=e.getContext("2d"),n=new Image(e.width,e.height);n.crossOrigin="anonymous",n.onload=function(){t.drawImage(n,0,0,e.width/2,e.height/2)},n.src="https://i.imgur.com/XhUhmR7.png"}},k=function(e,t,n,o,c,i,r){s.current.beginPath(),s.current.moveTo(e,t),s.current.lineTo(n,o),s.current.strokeStyle=i,s.current.lineWidth=c,s.current.stroke(),s.current.closePath(),a&&r&&a.emit("drawingEvent",{x0:e,y0:t,x1:n,y1:o,lineThickness:c,color:i})},S=function(e,t){console.log(i.current),(t=t||!1)||(l.current=[]),(e||i.current).push(document.getElementById("canvas").toDataURL()),console.log(i)},N=function(e,t){if(e.length){S(t,!0);var n=e.pop(),o=c.current,a=o.getContext("2d"),s=new Image(o.width,o.height);s.src=n,s.onload=function(){a.clearRect(0,0,o.width,o.height),a.drawImage(s,0,0,o.width/2,o.height/2)}}},I=function(e){console.log("clearCanvas");var t=c.current;t.getContext("2d").clearRect(0,0,t.width,t.height),O(!0),document.getElementById("canvas").changed=!1,i.current=[],l.current=[],a&&e&&a.emit("clearCanvas")};return Object(j.jsx)(m.Provider,{value:{canvasRef:c,prepareCanvas:function(){var e=c.current;e.style.width="100%",e.style.height="100%",e.width=2*e.offsetWidth,e.height=2*e.offsetHeight;var t=e.getContext("2d");t.scale(2,2),t.lineCap="round",t.strokeStyle="black",t.lineWidth=5,s.current=t,C(),document.getElementById("canvas").changed=!1},startDrawing:function(e){var t=e.nativeEvent,n=t.offsetX,o=t.offsetY;!a&&h&&(I(!1),O(!1)),b(!0),document.getElementById("canvas").changed=!0;var c=w;c.x=n,c.y=o,y(c),S(),a&&a.emit("saveCanvasState")},inDrawing:function(e){var t=e.nativeEvent;if(v){var n=t.offsetX,o=t.offsetY;k(w.x,w.y,n,o,w.lineThickness,w.color,!0);var a=w;a.x=n,a.y=o,y(a)}},finishDrawing:function(e){var t=e.nativeEvent;if(v){var n=t.offsetX,o=t.offsetY;k(w.x,w.y,n,o,w.lineThickness,w.color,!0),b(!1)}},clearCanvas:I,changeColor:function(e){return function(){var t=w;t.color=e,y(t)}},changeLineWidth:function(e){var t=w;t.lineThickness=e,y(t)},draw:k,undo:function(e){console.log("undo"),N(i.current,l.current),e&&a&&a.emit("undo")},redo:function(e){console.log("redo"),N(l.current,i.current),e&&a&&a.emit("redo")},saveCanvasState:S},children:t})},b=function(){return Object(o.useContext)(m)};var f=function(e){var t=e.socket,n=void 0===t?null:t,a=e.isDrawer,c=void 0===a||a,s=b(),i=s.canvasRef,r=s.prepareCanvas,l=s.startDrawing,u=s.finishDrawing,d=s.inDrawing,m=s.draw,v=s.clearCanvas,f=s.redo,g=s.undo,h=s.saveCanvasState;return Object(o.useEffect)((function(){r()}),[]),Object(o.useEffect)((function(){var e=function(e){m(e.x0,e.y0,e.x1,e.y1,e.lineThickness,e.color,!1)},t=function(){v(!1)},o=function(){g(!1)},a=function(){console.log("redo"),f(!1)};return n&&(n.on("drawingEvent",e),n.on("clearCanvas",t),n.on("undo",o),n.on("redo",a),n.on("saveCanvasState",h)),function(){n&&(n.off("drawingEvent",e),n.off("clearCanvas",t),n.off("undo",o),n.off("redo",a),n.off("saveCanvasState",h))}}),[n]),Object(j.jsx)("canvas",{id:"canvas",onMouseDown:c?l:void 0,onMouseUp:c?u:void 0,onMouseMove:c?d:void 0,ref:i})},g=n(86),h=function(){var e=b().clearCanvas;return Object(j.jsx)("button",{className:"btn2",onClick:e,children:"clear"})},O=function(){var e=b().undo;return Object(j.jsx)("button",{className:"btn2",onClick:function(){e(!0)},children:"undo"})},x=function(){var e=b().redo;return Object(j.jsx)("button",{className:"btn2",onClick:function(){e(!0)},children:"redo"})},p=n.p+"static/media/buttonClick.ed011a82.mp3";var w=function(e){var t=e.socket,n=e.history,a=new URLSearchParams(window.location.search).get("gameId");null!==a&&sessionStorage.setItem("inviteCode",a),Object(o.useEffect)((function(){sessionStorage.clear()}),[]),Object(o.useEffect)((function(){var e=function(e){sessionStorage.setItem("inviteCode",e),n.push({pathname:"/game"})},o=function(){sessionStorage.setItem("inviteCode",a),n.push({pathname:"/prestartLobby"})};return t&&(t.on("startGame",e),t.on("inviteCode",o)),function(){t&&(t.off("startGame",e),t.off("inviteCode",o))}}),[t]);var c=function(){var e=document.getElementById("canvas"),t=e.toDataURL("image/png");return!1===e.changed?(console.log("You haven't drawn an avatar! Drawing something nice!"),alert("You haven't drawn an avatar! Drawing something nice!"),!1):(sessionStorage.setItem("avatar",t),!0)},s=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=new Audio(p);a.play();var s=document.getElementById("username_input");""!==s.value?(sessionStorage.setItem("username",s.value),console.log(s.value),c()&&(o?t.emit("joinRoom",{userData:{uid:sessionStorage.getItem("username"),avatar:sessionStorage.getItem("avatar")},inviteCode:sessionStorage.getItem("inviteCode")}):n.push({pathname:e}))):alert("Username cannot be empty!")};return Object(j.jsx)("div",{className:"root",children:Object(j.jsx)(v,{children:Object(j.jsx)("div",{className:"purpleSplat",children:Object(j.jsxs)("div",{className:"orangeSplat",children:[Object(j.jsx)("div",{className:"header",children:Object(j.jsx)("img",{className:"logo",src:d,alt:"inkee-logo"})}),Object(j.jsx)("form",{children:Object(j.jsx)("input",{className:"username",id:"username_input",type:"text",placeholder:"enter username1...",maxLength:8})}),Object(j.jsxs)("div",{align:"center",children:[Object(j.jsx)("div",{className:"homeDrawArea",children:Object(j.jsx)(f,{})}),Object(j.jsxs)("div",{children:[Object(j.jsx)(x,{}),Object(j.jsx)(O,{}),Object(j.jsx)(h,{})]}),Object(j.jsx)("div",{children:Object(j.jsx)(g.a,{onClick:function(){s("/joinLobby",sessionStorage.getItem("inviteCode"))},className:"btn",variant:"secondary",size:"lg",children:"join game"})}),Object(j.jsx)("div",{children:!sessionStorage.getItem("inviteCode")&&Object(j.jsx)(g.a,{onClick:function(){s("/createLobby")},className:"btn",variant:"outline-primary",size:"lg",children:"create game"})})]})]})})})})};n(58);var y=function(e){var t=e.socket,n=e.history,a=Object(o.useState)(void 0),c=Object(r.a)(a,2),s=c[0],i=c[1],l=Object(o.useState)(void 0),u=Object(r.a)(l,2),d=u[0],m=u[1],v=Object(o.useState)(""),b=Object(r.a)(v,2),f=b[0],h=b[1],O=Object(o.useState)(void 0),x=Object(r.a)(O,2),w=x[0],y=x[1],C=Object(o.useState)(void 0),k=Object(r.a)(C,2),S=k[0],N=k[1];window.history.replaceState(null,"Inkee Create Lobby","/"),Object(o.useEffect)((function(){return t.on("inviteCode",(function(e){console.log(e),sessionStorage.setItem("inviteCode",e),sessionStorage.setItem("isAdmin",!0),n.push({pathname:"/prestartLobby"})})),function(){t.off("inviteCode")}}),[t,n]);var I=function(e){new Audio(p).play(),e.preventDefault();var n={numRounds:s,roundLength:d,isPrivate:S,customWords:[],customWordsOnly:w},o=document.getElementById("custom_words").value.split(/[ ,]+/);if("yes"===w){if(!(o.length>=10))return void alert("There must be at least 10 custom words!");n.customWords=o}else o.length>0&&(n.customWords=o);var a={uid:sessionStorage.getItem("username"),avatar:sessionStorage.getItem("avatar")};t.emit("createGame",{gameConfiguration:n,userData:a}),console.log("socket emit invite code")};return Object(j.jsx)("div",{className:"lobbyRoot",children:Object(j.jsxs)("form",{onSubmit:I,className:"form",children:[Object(j.jsxs)("select",{id:"numRounds",name:"numRounds",onChange:function(e){i(e.target.value)},value:s,className:"select",children:[Object(j.jsx)("option",{value:void 0,children:"choose rounds"}),Object(j.jsx)("option",{value:1,children:"1"}),Object(j.jsx)("option",{value:2,children:"2"}),Object(j.jsx)("option",{value:3,children:"3"}),Object(j.jsx)("option",{value:4,children:"4"}),Object(j.jsx)("option",{value:5,children:"5"}),Object(j.jsx)("option",{value:6,children:"6"}),Object(j.jsx)("option",{value:7,children:"7"}),Object(j.jsx)("option",{value:8,children:"8"}),Object(j.jsx)("option",{value:9,children:"9"}),Object(j.jsx)("option",{value:10,children:"10"})]}),Object(j.jsxs)("select",{id:"roundLength",name:"roundLength",onChange:function(e){m(e.target.value)},value:d,className:"select",children:[Object(j.jsx)("option",{value:void 0,children:"drawing time"}),Object(j.jsx)("option",{value:30,children:"30"}),Object(j.jsx)("option",{value:40,children:"40"}),Object(j.jsx)("option",{value:50,children:"50"}),Object(j.jsx)("option",{value:60,children:"60"}),Object(j.jsx)("option",{value:70,children:"70"}),Object(j.jsx)("option",{value:80,children:"80"}),Object(j.jsx)("option",{value:90,children:"90"}),Object(j.jsx)("option",{value:120,children:"120"}),Object(j.jsx)("option",{value:180,children:"180"})]}),Object(j.jsxs)("select",{id:"privateGame",name:"privateGame",onChange:function(e){N(e.target.value)},value:S,className:"select",children:[Object(j.jsx)("option",{value:void 0,children:"private game"}),Object(j.jsx)("option",{value:!0,children:"yes"}),Object(j.jsx)("option",{value:!1,children:"no"})]}),Object(j.jsxs)("select",{id:"exclusiveCustomWords",name:"customWords",onChange:function(e){y(e.target.value)},value:w,className:"select",children:[Object(j.jsx)("option",{value:void 0,children:"use custom words only"}),Object(j.jsx)("option",{value:!1,children:"no"}),Object(j.jsx)("option",{value:!0,children:"yes"})]}),Object(j.jsx)("div",{className:"wordlist",children:Object(j.jsx)("textarea",{className:"words",id:"custom_words",placeholder:"enter comma-separated custom words...",value:f,onChange:function(e){var t=e.target.value;h(t)}})}),Object(j.jsx)(g.a,{variant:"primary",onClick:I,children:"start game"})]})})};var C=function(){return Object(j.jsx)("div",{className:"header",children:Object(j.jsx)("img",{className:"logo",src:d,alt:"inkee-logo"})})};n(59);var k=function(e){var t=e.socket,n=e.history;window.history.replaceState(null,"Inkee Join Lobby","/"),Object(o.useEffect)((function(){var e=function(e){sessionStorage.setItem("inviteCode",e),n.push({pathname:"/game"})},o=function(e){sessionStorage.setItem("inviteCode",e),n.push({pathname:"/prestartLobby"})};return t.on("startGame",e),t.on("inviteCode",o),function(){t.off("startGame",e),t.off("inviteCode",o)}}),[t,n]);var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,o=new Audio(p);o.play();var a={userData:{uid:sessionStorage.getItem("username"),avatar:sessionStorage.getItem("avatar")},inviteCode:e};n&&""===e?alert("Game ID text box is empty!"):n&&""!==e?(a.inviteCode=e,t.emit("joinRoom",a)):n||t.emit("joinRandomRoom",a)};return Object(j.jsx)("div",{className:"root",children:Object(j.jsx)("div",{className:"greenSplat",children:Object(j.jsxs)("div",{className:"orangeSplatTwo",children:[Object(j.jsx)(C,{}),Object(j.jsxs)("form",{className:"form-group",children:[Object(j.jsx)("input",{id:"id_input",className:"username",type:"text",placeholder:"enter game ID..."}),Object(j.jsx)("br",{}),Object(j.jsx)(g.a,{variant:"primary",onClick:function(){a(document.getElementById("id_input").value,!0)},children:"join with ID"})]}),Object(j.jsx)(g.a,{variant:"primary",onClick:function(){a(document.getElementById("id_input").value,!1)},children:"join random game"})]})})})},S=n(15);n(60);function N(e){var t=e.users,n=void 0===t?[]:t,o=e.isPrestartLobby,a=e.isFinalScreen,c=e.currentUser,s=void 0===c?null:c,i=e.isAdmin,r=void 0!==i&&i,l=e.socket,u=void 0===l?null:l,d=n.map((function(e){return Object(j.jsxs)("div",{className:"userProfile",children:[Object(j.jsx)("canvas",{className:"avatar",id:e.uid+"-avatar"}),Object(j.jsxs)("div",{className:"userText",children:[Object(j.jsx)("div",{children:Object(j.jsx)("b",{children:e.uid})}),Object(j.jsxs)("div",{children:["Score: ",e.score]})]})]},e.uid)}));return o?(d=n.map((function(e){return Object(j.jsxs)("div",{className:"userProfile",children:[Object(j.jsx)("canvas",{className:"avatar",id:e.uid+"-avatar"}),Object(j.jsx)("div",{className:"userText",children:Object(j.jsx)("div",{children:Object(j.jsx)("b",{children:e.uid})})}),s!==e.uid&&r&&Object(j.jsx)("button",{className:"removePlayer",onClick:function(){u.emit("disconnectPlayer",e.uid)},children:"X"})]},e.uid)})),Object(j.jsx)("div",{className:"profilesTwo",children:d})):(a&&(d=n.map((function(e){return Object(j.jsxs)("div",{className:"userProfileTwo",children:[Object(j.jsx)("canvas",{className:"avatar",id:e.uid+"-avatar"}),Object(j.jsxs)("div",{className:"userText",children:[Object(j.jsx)("div",{children:Object(j.jsx)("b",{children:e.uid})}),Object(j.jsxs)("div",{children:["Score: ",e.score]})]})]},e.uid)}))),Object(j.jsx)("div",{className:"profiles",children:d}))}var I=n(76),L=n(78),E=n(80),B=n(82),T=n(84),D=n(77),P=n(79),G=n(81),M=n(83),R=n(85);var A=function(e){var t=e.socket,n=e.history,a=Object(o.useState)(""),c=Object(r.a)(a,2),s=c[0],i=c[1],l=Object(o.useState)(window.location.origin),u=Object(r.a)(l,2),d=u[0],m=u[1],v=Object(o.useState)([]),b=Object(r.a)(v,2),f=b[0],h=b[1];return window.history.replaceState(null,"Inkee Prestart Lobby","/".concat(sessionStorage.getItem("inviteCode"))),Object(o.useEffect)((function(){var e=document.querySelector("#copy.copyBtn"),t=function(e){new Audio(p).play(),e.preventDefault();var t=document.getElementById("gameLink").value;navigator.clipboard.writeText(t)};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}),[]),Object(o.useEffect)((function(){var e=function(e){var t=document.getElementById("".concat(e.uid,"-avatar")),n=t.getContext("2d"),o=new Image;o.onload=function(){n.drawImage(o,0,0,t.width,t.height)},o.src=e.avatar},o=function(t){h(t),function(t){t.map((function(t){e(t)}))}(t)};t.on("getPlayers",o);var a=function(t){h((function(e){return[].concat(Object(S.a)(e),[t])})),console.log(t),e(t)};t.on("newPlayer",a);var c=function(e){h((function(t){return t.filter((function(t){return t.uid!==e}))}))};t.on("disconnection",c);var s=function(){sessionStorage.clear(),n.push({pathname:"/"})};return t.on("disconnectPlayer",s),t.emit("getPlayers"),function(){t.off("getPlayers",o),t.off("newPlayer",a),t.off("disconnection",c),t.off("disconnectPlayer",s)}}),[t]),Object(o.useEffect)((function(){var e=function(){n.push({pathname:"/game"})};return t.on("startGame",e),function(){t.off("startGame",e)}}),[t,n]),Object(o.useEffect)((function(){i(sessionStorage.getItem("inviteCode")),m(d+"/"+s)}),[n]),Object(j.jsx)("div",{className:"prestartRoot",children:Object(j.jsxs)("div",{className:"form",children:[Object(j.jsxs)("p",{className:"gameId",children:["game ID: ",s]}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{className:"linkBox",type:"text",id:"gameLink",value:window.location.origin+"/"+s,readOnly:!0})}),Object(j.jsxs)("div",{className:"shareContainer",children:[Object(j.jsx)("button",{className:"copyBtn",type:"button",id:"copy",children:"Copy Link"}),Object(j.jsxs)("div",{className:"shareBtn",children:[Object(j.jsx)(I.a,{url:window.location.origin+"/"+s,quote:"Join my Inkee.io game!",children:Object(j.jsx)(D.a,{size:43})}),Object(j.jsx)(L.a,{url:window.location.origin+"/"+s,quote:"Join my Inkee.io game!",children:Object(j.jsx)(P.a,{size:43})}),Object(j.jsx)(E.a,{url:window.location.origin+"/"+s,quote:"Join my Inkee.io game!",children:Object(j.jsx)(G.a,{size:43})}),Object(j.jsx)(B.a,{url:window.location.origin+"/"+s,quote:"Join my Inkee.io game!",children:Object(j.jsx)(M.a,{size:43})}),Object(j.jsx)(T.a,{url:window.location.origin+"/"+s,quote:"Join my Inkee.io game!",children:Object(j.jsx)(R.a,{size:43})})]})]}),sessionStorage.getItem("isAdmin")&&Object(j.jsx)(g.a,{onClick:function(){new Audio(p).play(),t.emit("startGame")},variant:"primary",children:"ready"}),Object(j.jsx)(N,{users:f,isAdmin:sessionStorage.getItem("isAdmin"),currentUser:sessionStorage.getItem("username"),isPrestartLobby:!0,isFinalScreen:!1,socket:t})]})})},W=(n(61),function(){var e=b().changeColor;return Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{id:"colorButton",className:"color",onClick:e("blue")}),Object(j.jsx)("button",{id:"colorButton",className:"color",onClick:e("red")}),Object(j.jsx)("button",{id:"colorButton",className:"color",onClick:e("green")}),Object(j.jsx)("button",{id:"colorButton",className:"color",onClick:e("yellow")}),Object(j.jsx)("button",{id:"colorButton",className:"color",onClick:e("pink")}),Object(j.jsx)("button",{id:"colorButton",className:"color",onClick:e("orange")}),Object(j.jsx)("button",{id:"colorButton",className:"color",onClick:e("purple")}),Object(j.jsx)("button",{id:"colorButton",className:"color",onClick:e("brown")}),Object(j.jsx)("button",{id:"colorButton",className:"color",onClick:e("black")}),Object(j.jsx)("button",{id:"colorButton",className:"color",onClick:e("white")})]})}),F=function(){var e=b().changeLineWidth;return Object(j.jsx)("div",{children:Object(j.jsx)("input",{className:"slider",id:"typeinp",type:"range",min:"1",max:"30",defaultValue:"15",step:"1",onChange:function(t){var n=parseInt(t.target.value);e(n)}})})};function H(e){var t=e.words,n=void 0===t?null:t,o=e.socket,a=void 0===o?null:o,c=n.map((function(e){return Object(j.jsx)("button",{className:"wordButton",onClick:function(){a.emit("chooseWord",e)},children:e},e+"-selector")}));return Object(j.jsx)("div",{className:"wordSelector",children:Object(j.jsx)("div",{children:c})})}var U=function(e){var t=e.name,n=void 0===t?"":t,o=e.message,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=a.correctGuess,s=void 0!==c&&c,i=a.closeGuess,r=void 0!==i&&i,l=a.guessedMessage,u=void 0!==l&&l,d=a.serverMessage,j=void 0!==d&&d,m=a.endGameMsg,v=void 0!==m&&m,b=document.createElement("p"),f=document.createTextNode("".concat(o)),g=document.getElementById("chat");if(""!==n){var h=document.createElement("span");h.textContent="".concat(n,": "),h.classList.add("fw-bold"),b.append(h)}b.classList.add("p-2","mb-0"),r&&b.classList.add("closeAnswer"),s&&b.classList.add("correctAnswer"),b.append(f),r&&b.classList.add("closeAnswer"),s&&b.classList.add("correctAnswer"),u&&b.classList.add("guessedMessage"),j&&b.classList.add("serverMessage"),v&&b.classList.add("endGameMsg"),g.appendChild(b),g.scrollTop=g.scrollHeight},J=function(e){var t=e.socket,n=e.history,a=Object(o.useState)([]),c=Object(r.a)(a,2),s=c[0],i=c[1],l=Object(o.useState)([]),u=Object(r.a)(l,2),d=u[0],m=u[1],b=Object(o.useState)(!1),g=Object(r.a)(b,2),p=g[0],w=g[1],y=Object(o.useState)(!1),C=Object(r.a)(y,2),k=C[0],I=C[1],L=Object(o.useState)([]),E=Object(r.a)(L,2),B=E[0],T=E[1];return window.history.replaceState(null,"Inkee","/".concat(sessionStorage.getItem("inviteCode"))),Object(o.useEffect)((function(){var e=function(e){var t=document.getElementById("".concat(e.uid,"-avatar")),n=t.getContext("2d"),o=new Image;o.onload=function(){n.drawImage(o,0,0,t.width,t.height)},o.src=e.avatar},n=function(t){console.log(t),m(t),function(t){t.map((function(t){e(t)}))}(t)};t.on("getPlayers",n);var o=function(t){m((function(e){return[].concat(Object(S.a)(e),[t])})),console.log(t),e(t)};t.on("newPlayer",o);var a=function(e){m((function(t){return t.filter((function(t){return t.uid!==e}))}))};t.on("disconnection",a),t.emit("getPlayers");var c=function(e){console.log(e),T(e),I(!0)};return t.on("chooseWord",c),function(){t.off("getPlayers",n),t.off("newPlayer",o),t.off("disconnection",a),t.off("chooseWord",c)}}),[t]),Object(o.useEffect)((function(){var e=document.querySelector("#sendMessage"),o=function(n){if("Enter"===n.key){n.preventDefault();var o=e.value;e.value="",t.emit("chatMessage",{message:o}),console.log(o)}};e.addEventListener("keypress",o);var a=function(e){console.log(e),i([].concat(Object(S.a)(s),[e])),U({name:e.uid,message:e.message})};t.on("chatMessage",a);var c=function(e){console.log(e),i([].concat(Object(S.a)(s),[e])),U({name:e.uid,message:e.message},{closeGuess:!0})};t.on("closeGuess",c);var r=function(e){console.log(e),i([].concat(Object(S.a)(s),[e])),U({name:e.uid,message:e.message},{correctGuess:!0})};t.on("correctGuess",r);var l=function(e){document.getElementById("timer").innerHTML="&nbsp;&nbsp;".concat(e,"&nbsp;&nbsp;")};t.on("timer",l);var u=function(e){i([].concat(Object(S.a)(s),[e])),U({message:e.message},{correctGuess:!0})};t.on("userCorrectGuess",u);var d=function(){document.getElementById("word").innerHTML="Your teammate is picking the word!"};t.on("selectedDrawing",d);var j=function(e){i([].concat(Object(S.a)(s),[e])),U({name:e.uid,message:e.message},{guessedMessage:!0})};t.on("guessedMessage",j);var m=function(e){w(!0),I(!1),document.getElementById("word").innerHTML=e};t.on("word",m);var v=function(e){var t=e.join("&nbsp;");t=t.replace(/\s/g,"&nbsp;"),document.getElementById("word").innerHTML=t,console.log(t)};t.on("wordToGuess",v);var b=function(){w(!1),I(!1),T([])};t.on("endRound",b);var f=function(e){if(console.log(e),!e.drawingTeam.includes(sessionStorage.getItem("username"))){var t="Drawer is selecting word.";e.drawingTeam.length>1&&(t="Drawers are selecting word."),document.getElementById("word").innerHTML=t}i([].concat(Object(S.a)(s),[e.msg])),U({message:e.msg},{serverMessage:!0})};t.on("drawingTeam",f);var g=function(e){document.getElementById("word").innerHTML=e};t.on("wordReveal",g);var h=function(e){i([].concat(Object(S.a)(s),[e])),U({message:e},{endGameMsg:!0})};t.on("endGameMsg",h);var O=function(){t.emit("getPlayers")};t.on("scoreUpdate",O);var x=function(e){n.push({pathname:"/finalScore",state:{data:e}})};return t.on("endGame",x),function(){t.off("endGameMsg",h),t.off("wordReveal",g),t.off("correctGuess",r),t.off("word",m),t.off("wordToGuess",v),t.off("closeGuess",c),t.off("chatMessage",a),t.off("guessedMessage",j),t.off("timer",l),t.off("userCorrectGuess",u),t.off("scoreUpdate",O),t.off("selectedDrawing",d),t.off("endRound",b),t.off("drawingTeam",f),t.off("endGame",x),e.removeEventListener("keypress",o)}}),[t,s]),Object(o.useEffect)((function(){var e=function(e){var t=e.message;i([].concat(Object(S.a)(s),[t])),console.log(t),U({message:t},{serverMessage:!0});var n=e.currentHint.join("&nbsp;");n=n.replace(/\s/g,"&nbsp;"),document.getElementById("word").innerHTML=n};return t.on("gameData",e),t.emit("getGameData"),function(){t.off("gameData",e)}}),[]),Object(j.jsx)("div",{className:"gameRoot",children:Object(j.jsx)(v,{socket:t,children:Object(j.jsx)("div",{className:"purpleSplatTwo",children:Object(j.jsxs)("div",{className:"limeSplat",children:[Object(j.jsxs)("div",{className:"topContainer",children:[Object(j.jsx)("div",{className:"inkeeLogo"}),k?Object(j.jsx)(H,{words:B,socket:t}):Object(j.jsx)("div",{id:"word",className:"word",children:"Drawer(s) is selecting word."}),Object(j.jsx)("div",{className:"time",id:"timer",children:"\xa010\xa0"})]}),Object(j.jsxs)("div",{className:"middleContainer",children:[Object(j.jsx)(N,{users:d,isPrestartLobby:!1,isFinalScreen:!1}),Object(j.jsx)("div",{className:"drawArea",children:Object(j.jsx)(f,{socket:t,isDrawer:p})}),Object(j.jsx)("div",{className:"chat",id:"chat"})]}),Object(j.jsxs)("div",{className:"bottomContainer",children:[Object(j.jsx)("div",{className:"sendMessage",children:Object(j.jsx)("input",{type:"text",id:"sendMessage",placeholder:"enter guess..."})}),p&&Object(j.jsxs)("div",{className:"drawingTools",children:[Object(j.jsx)(h,{}),Object(j.jsx)(O,{}),Object(j.jsx)(x,{}),Object(j.jsx)(F,{}),Object(j.jsx)(W,{})]})]})]})})})})};var _=function(e){var t=e.history,n=Object(o.useState)(t.location.state.data),a=Object(r.a)(n,1)[0];return window.history.replaceState(null,"Inkee","/".concat(sessionStorage.getItem("inviteCode"))),Object(o.useEffect)((function(){!function(e){e.map((function(e){!function(e){console.log("Rendering Avatar");var t=document.getElementById("".concat(e.uid,"-avatar")),n=t.getContext("2d"),o=new Image;o.onload=function(){n.drawImage(o,0,0,t.width,t.height)},o.src=e.avatar}(e)}))}(a)}),[]),Object(j.jsx)("div",{className:"prestartRoot",children:Object(j.jsxs)("div",{className:"formTwo",children:[Object(j.jsx)("h1",{className:"score",children:"Final Scores"}),Object(j.jsx)("div",{children:Object(j.jsx)(g.a,{variant:"primary",onClick:function(){new Audio(p).play(),sessionStorage.clear(),t.push({pathname:"/"})},children:"play again"})}),Object(j.jsx)("div",{children:Object(j.jsx)(N,{users:a,isPrestartLobby:!1,isFinalScreen:!0})})]})})},q=n(48),z=n.p+"static/media/vanille-fraise.0af1c8d2.mp3",Y=n(36),X=n.n(Y),V=function(){var e=Object(o.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(j.jsxs)("div",{className:"topLayer",children:[Object(j.jsx)("button",{className:"btn3",onClick:function(){return a(!n)},children:n?"mute":"unmute"}),Object(j.jsx)(X.a,{autoLoad:!0,url:z,playStatus:n?X.a.status.PLAYING:X.a.status.STOPPED,playFromPosition:300,loop:!0})]})};var K=function(){var e=Object(o.useState)(null),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(l.f)();return Object(o.useEffect)((function(){var e;e="localhost"===window.location.hostname?"http://".concat(window.location.hostname,":8080"):"wss://".concat(window.location.hostname,"/");var t=Object(q.a)(e,{transports:["websocket","polling"],upgrade:!0,secure:!0});return t.on("connect_error",(function(){t.io.opts.transports=["polling","websocket"]})),t.on("ERROR",(function(e){console.log(e)})),a(t),function(){t.removeAllListeners(),t.close()}}),[a]),Object(j.jsxs)(u.a,{children:[Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{path:"/",exact:!0,render:function(e){return Object(j.jsx)(w,Object(i.a)({socket:n,history:c},e))}}),Object(j.jsx)(l.a,{path:"/createLobby",render:function(e){return Object(j.jsx)(y,Object(i.a)({socket:n,history:c},e))}}),Object(j.jsx)(l.a,{path:"/joinLobby",render:function(e){return Object(j.jsx)(k,Object(i.a)({socket:n,history:c},e))}}),Object(j.jsx)(l.a,{path:"/prestartLobby",render:function(e){return Object(j.jsx)(A,Object(i.a)({socket:n,history:c},e))}}),Object(j.jsx)(l.a,{path:"/game",render:function(e){return Object(j.jsx)(J,Object(i.a)({socket:n,history:c},e))}}),Object(j.jsx)(l.a,{path:"/finalScore",render:function(e){return Object(j.jsx)(_,Object(i.a)({socket:n,history:c},e))}})]})}),Object(j.jsx)(V,{})]})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,87)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),o(e),a(e),c(e),s(e)}))};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(K,{})}),document.getElementById("root")),Q()}},[[75,1,2]]]);
//# sourceMappingURL=main.080ce92b.chunk.js.map